{"version":3,"sources":["components/Header/index.js","components/Header/Header.js","components/BookListItem/index.js","components/BookListItem/BookListItem.js","components/LoadSpinner/index.js","components/LoadSpinner/LoadSpinner.js","components/ErrorIndicator/index.js","components/ErrorIndicator/ErrorIndicator.js","components/BookstoreContextService/BookstoreContextService.js","components/hoc/withBookstoreService.js","actions/index.js","utils/compose.js","components/BookList/BookList.js","components/BookList/index.js","components/ShoppingCartTable/index.js","components/ShoppingCartTable/ShoppingCartTable.js","components/pages/HomePage.js","components/pages/CartPage.js","components/App/index.js","components/App/App.js","components/ErrorBoundry/index.js","components/ErrorBoundry/ErrorBoundry.js","reducers/bookList.js","reducers/shoppingCart.js","reducers/index.js","store.js","index.js","services/BookstoreService.js"],"names":["Header","_ref","itemsCount","total","react_default","a","createElement","react_router_dom","to","className","react_fontawesome_index_es","icon","faShoppingCart","BookListItem","book","onAddToCart","title","author","price","coverImg","src","alt","onClick","LoadSpinner","ErrorIndicator","React","createContext","BookstoreServiceProvider","Provider","BookstoreServiceConsumer","Consumer","withBookService","Wrapped","props","bookstoreService","Object","assign","bookAddToCart","bookID","type","payload","fetchBooks","dispatch","getBooks","then","data","catch","error","booksError","compose","_len","arguments","length","func","Array","_key","comp","reduceRight","wrapped","fn","BookList","books","map","components_BookListItem","key","id","BookListContainer","componentDidMount","_this","_this$props","this","loading","components_LoadSpinner","components_ErrorIndicator","BookList_BookList_BookList","Component","withBookstoreService","connect","_ref2","_ref2$bookList","bookList","_ref3","ShoppingCartTable","_ref2$shoppingCart","shoppingCart","items","cartItems","orderTotal","onIncrease","onDecrease","onDelete","item","i","count","faMinusCircle","faPlusCircle","faTrashAlt","HomePage","components_BookList","components_ShoppingCartTable","CartPage","App","components_Header","basename","process","react_router","path","exact","component","ErrorBoundry","state","hasError","componentDidCatch","setState","children","updateBookList","undefined","updateCartOrder","quantity","updatedCart","updateCartItems","updatedTotal","reduce","updatedCount","sameBook","find","filter","objectSpread","newBook","concat","toConsumableArray","updateShoppingCart","_ref4","_ref5","reducer","action","store","createStore","Promise","resolve","reject","setTimeout","Error","ReactDOM","render","es","components_ErrorBoundry","value","components_App","document","getElementById"],"mappings":"waAEeA,ECOA,SAAAC,GAA0B,IAAvBC,EAAuBD,EAAvBC,WAAYC,EAAWF,EAAXE,MAC5B,OACEC,EAAAC,EAAAC,cAAA,cACEF,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,GAAG,KAAT,WACAJ,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAMC,GAAG,SAAQJ,EAAAC,EAAAC,cAAA,QAAMG,UAAU,aAAYL,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAiBC,KAAMC,OAA0BV,EAA9F,WAAiHE,EAAAC,EAAAC,cAAA,gBAAQH,GAAzH,+CCXSU,eCEM,SAAAZ,GAA2B,IAAxBa,EAAwBb,EAAxBa,KAAMC,EAAkBd,EAAlBc,YACpBC,EAAmCF,EAAnCE,MAAOC,EAA4BH,EAA5BG,OAAQC,EAAoBJ,EAApBI,MAAOC,EAAaL,EAAbK,SAC9B,OACEf,EAAAC,EAAAC,cAAA,MAAIG,UAAU,kBACZL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,OACbL,EAAAC,EAAAC,cAAA,OAAKc,IAAKD,EAAUE,IAAKL,KAE3BZ,EAAAC,EAAAC,cAAA,OAAKG,UAAU,QACbL,EAAAC,EAAAC,cAAA,QAAMG,UAAU,SAASO,GACzBZ,EAAAC,EAAAC,cAAA,KAAGG,UAAU,UAAUQ,GACvBb,EAAAC,EAAAC,cAAA,KAAGG,UAAU,SAAb,IAAuBS,GACvBd,EAAAC,EAAAC,cAAA,UAAQG,UAAU,cAAca,QAASP,GAAzC,mBCbOQ,SCEK,WAClB,OACEnB,EAAAC,EAAAC,cAAA,OAAKG,UAAU,oBACbL,EAAAC,EAAAC,cAAA,OAAKG,UAAU,eACbL,EAAAC,EAAAC,cAAA,gBCNOkB,SCEQ,WACrB,OACEpB,EAAAC,EAAAC,cAAA,OAAKG,UAAU,mBACbL,EAAAC,EAAAC,cAAA,KAAGG,UAAU,QAAb,SACAL,EAAAC,EAAAC,cAAA,mDCHFmB,IAAMC,gBAFEC,IAAVC,SACUC,IAAVC,SCcaC,EAdS,kBAAM,SAAAC,GAC5B,OAAO,SAACC,GACN,OACE7B,EAAAC,EAAAC,cAACuB,EAAD,KAEI,SAACK,GACC,OAAO9B,EAAAC,EAAAC,cAAC0B,EAADG,OAAAC,OAAA,GAAaH,EAAb,CAAoBC,iBAAkBA,UCUnDG,EAAgB,SAACC,GACrB,MAAO,CACLC,KAAM,mBACNC,QAASF,IAkBPG,EAAa,SAACP,EAAkBQ,GAAnB,OAAgC,WACjDA,EAlCO,CACLH,KAAM,wBAkCRL,EAAiBS,WACfC,KAAK,SAAAC,GAAI,OAAIH,EA3CR,CACLH,KAAM,sBACNC,QAyCkCK,MAClCC,MAAM,SAAAC,GAAK,OAAIL,EAhCA,SAACK,GAClB,MAAO,CACLR,KAAM,sBACNC,QAASO,GA6BeC,CAAWD,QCzCxBE,EAJC,mBAAAC,EAAAC,UAAAC,OAAIC,EAAJ,IAAAC,MAAAJ,GAAAK,EAAA,EAAAA,EAAAL,EAAAK,IAAIF,EAAJE,GAAAJ,UAAAI,GAAA,OAAa,SAAAC,GAC3B,OAAOH,EAAKI,YAAY,SAACC,EAASC,GAAV,OAAiBA,EAAGD,IAAUF,KCWlDI,EAAW,SAAA3D,GAA0B,IAAxB4D,EAAwB5D,EAAxB4D,MAAO9C,EAAiBd,EAAjBc,YAExB,OACEX,EAAAC,EAAAC,cAAA,MAAIG,UAAU,aAEVoD,EAAMC,IAAI,SAAAhD,GACR,OAAOV,EAAAC,EAAAC,cAACyD,EAAD,CACGC,IAAKlD,EAAKmD,GACVnD,KAAMA,EACNC,YAAa,kBAAMA,EAAYD,EAAKmD,WAQlDC,6MAEJC,kBAAoB,WAClBC,EAAKnC,MAAMQ,sFAGJ,IAAA4B,EACwCC,KAAKrC,MAA5C4B,EADDQ,EACCR,MAAOU,EADRF,EACQE,QAASxB,EADjBsB,EACiBtB,MAAOhC,EADxBsD,EACwBtD,YAE/B,OAAIwD,EAAgBnE,EAAAC,EAAAC,cAACkE,EAAD,MAChBzB,EAAc3C,EAAAC,EAAAC,cAACmE,EAAD,MAEXrE,EAAAC,EAAAC,cAACoE,EAAD,CAAUb,MAAOA,EAAO9C,YAAaA,WAZhB4D,aC3BjBf,EDsDAX,EACb2B,IACAC,YAbsB,SAAAC,GAAyC,IAAAC,EAAAD,EAAvCE,SACxB,MAAO,CAAEnB,MADsDkB,EAA5BlB,MACnBU,QAD+CQ,EAArBR,QACjBxB,MADsCgC,EAAZhC,QAI1B,SAACL,EAADuC,GAAkC,IAAtB/C,EAAsB+C,EAAtB/C,iBACrC,MAAO,CACLO,WAAYA,EAAWP,EAAkBQ,GACzC3B,YAAa,SAACkD,GAAD,OAAQvB,EAASL,EAAc4B,QAIjChB,CAGbiB,GEzDagB,SCiEAL,YAfS,SAAAC,GAA6C,IAAAK,EAAAL,EAA3CM,aACxB,MAAO,CACLC,MAFiEF,EAA5BG,UAGrCnF,MAHiEgF,EAAjBI,aAOzB,SAAC7C,GAC1B,MAAO,CACJ8C,WAAY,SAACvB,GAAD,OAAQvB,EAASL,EAAc4B,KAC3CwB,WAAY,SAACxB,GAAD,OAAQvB,ELlChB,CACLH,KAAM,wBACNC,QKgCiDyB,KAChDyB,SAAU,SAACzB,GAAD,OAAQvB,EL5Bd,CACLH,KAAM,wBACNC,QK0B+CyB,OAIpCY,CA1DW,SAAA5E,GAAsD,IAApDoF,EAAoDpF,EAApDoF,MAAOlF,EAA6CF,EAA7CE,MAAOqF,EAAsCvF,EAAtCuF,WAAYC,EAA0BxF,EAA1BwF,WAAYC,EAAczF,EAAdyF,SAmBhE,OACEtF,EAAAC,EAAAC,cAAA,OAAKG,UAAU,uBACbL,EAAAC,EAAAC,cAAA,wBACAF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,aACEF,EAAAC,EAAAC,cAAA,UACEF,EAAAC,EAAAC,cAAA,eACAF,EAAAC,EAAAC,cAAA,kBACAF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,mBACAF,EAAAC,EAAAC,cAAA,sBAGJF,EAAAC,EAAAC,cAAA,aAEI+E,EAAMvB,IAhCE,SAAC6B,EAAMC,GAAM,IACrB3B,EAA2B0B,EAA3B1B,GAAIjD,EAAuB2E,EAAvB3E,MAAO6E,EAAgBF,EAAhBE,MAAO1F,EAASwF,EAATxF,MAC1B,OACEC,EAAAC,EAAAC,cAAA,MAAI0D,IAAKC,GACP7D,EAAAC,EAAAC,cAAA,UAAKsF,EAAI,GACTxF,EAAAC,EAAAC,cAAA,UAAKU,GACLZ,EAAAC,EAAAC,cAAA,UAAKuF,GACLzF,EAAAC,EAAAC,cAAA,cAAMH,GACNC,EAAAC,EAAAC,cAAA,MAAIG,UAAU,WACZL,EAAAC,EAAAC,cAAA,UAAQG,UAAU,WAAWa,QAAS,kBAAMmE,EAAWxB,KAAK7D,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAiBC,KAAMmF,OACnF1F,EAAAC,EAAAC,cAAA,UAAQG,UAAU,WAAWa,QAAS,kBAAMkE,EAAWvB,KAAK7D,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAiBC,KAAMoF,OACnF3F,EAAAC,EAAAC,cAAA,UAAQG,UAAU,SAASa,QAAS,kBAAMoE,EAASzB,KAAK7D,EAAAC,EAAAC,cAACI,EAAA,EAAD,CAAiBC,KAAMqF,aAyBnF5F,EAAAC,EAAAC,cAAA,KAAGG,UAAU,SAAb,UAA4BL,EAAAC,EAAAC,cAAA,gBAAQH,QCjC3B8F,EATE,WACf,OACE7F,EAAAC,EAAAC,cAAA,WACEF,EAAAC,EAAAC,cAAC4F,EAAD,MACA9F,EAAAC,EAAAC,cAAC6F,EAAD,QCESC,EARE,WACf,OACEhG,EAAAC,EAAAC,cAAA,WACIF,EAAAC,EAAAC,cAAC6F,EAAD,QCJOE,ECgCAxB,YAPS,SAAAC,GAA8C,IAAAK,EAAAL,EAA5CM,aACxB,MAAO,CACLjF,MAFkEgF,EAA7BI,WAGrCrF,WAHkEiF,EAAjBjF,aAOtC2E,CArBH,SAAA5E,GAAyB,IAAvBE,EAAuBF,EAAvBE,MAAOD,EAAgBD,EAAhBC,WACnB,OACEE,EAAAC,EAAAC,cAAA,OAAK2D,GAAG,OACN7D,EAAAC,EAAAC,cAACgG,EAAD,CAAQpG,WAAYA,EAAYC,MAAOA,IACvCC,EAAAC,EAAAC,cAACC,EAAA,EAAD,CAAQgG,SAAUC,cAChBpG,EAAAC,EAAAC,cAACmG,EAAA,EAAD,KACErG,EAAAC,EAAAC,cAACmG,EAAA,EAAD,CAAOC,KAAK,IAAIC,OAAK,EAACC,UAAWX,IACjC7F,EAAAC,EAAAC,cAACmG,EAAA,EAAD,CAAOC,KAAK,QAAQC,OAAK,EAACC,UAAWR,SClBhCS,6MCIbC,MAAQ,CACNC,UAAU,KAGZC,kBAAoB,WAClB5C,EAAK6C,SAAS,CACZF,UAAU,6EAKZ,OAAIzC,KAAKwC,MAAMC,SACN3G,EAAAC,EAAAC,cAACmE,EAAD,MAGFH,KAAKrC,MAAMiF,gBAjBoBvC,qBC8B3BwC,EAlCQ,SAACL,EAAD7G,GAA4B,IAAnBsC,EAAmBtC,EAAnBsC,KAAMC,EAAavC,EAAbuC,QACpC,QAAc4E,IAAVN,EACF,MAAO,CACLjD,MAAO,GACPU,SAAS,EACTxB,MAAO,MAIX,OAAQR,GACN,IAAK,sBACH,MAAO,CACLsB,MAAO,GACPU,SAAS,EACTxB,MAAO,MAEX,IAAK,sBACH,MAAO,CACLc,MAAOrB,EACP+B,SAAS,EACTxB,MAAO,MAEX,IAAK,sBACH,MAAO,CACLc,MAAO,GACPU,SAAS,EACTxB,MAAOP,GAGX,QACE,OAAOsE,EAAM9B,2BC9BbqC,EAAkB,SAACP,EAAOxE,EAAQgF,GACtC,IAAMC,EAAcC,EAAgBV,EAAOxE,EAAQgF,GAC7CG,EAAeF,EAAYG,OAAO,SAACvH,EAAOwF,GAAR,OAAiBxF,EAAQwF,EAAKxF,OAAO,GACvEwH,EAAeJ,EAAYG,OAAO,SAACvH,EAAOwF,GAAR,OAAiBxF,EAAQwF,EAAKE,OAAO,GAC7E,MAAO,CACLP,UAAWiC,EACXrH,WAAYyH,EACZpC,WAAYkC,IAIVD,EAAkB,SAACV,EAAOxE,EAAQgF,GAAa,IAC5BhC,EAAkCwB,EAAjD1B,aAAeE,UAAuBzB,EAAWiD,EAAtB9B,SAAWnB,MAGxC+D,EAAWtC,EAAUuC,KAAK,SAAA5H,GAAA,OAAAA,EAAEgE,KAAe3B,IACjD,GAAIsF,EAEF,OAAIA,EAAS/B,MAAQyB,GAAY,EACxBhC,EAAUwC,OAAO,SAAAhD,GAAA,OAAAA,EAAEb,KAAe3B,IAGpCgD,EAAUxB,IAAI,SAAA6B,GACnB,OAAIiC,EAAS3D,KAAO0B,EAAK1B,GAAW0B,EAE7BxD,OAAA4F,EAAA,EAAA5F,CAAA,GACFwD,EADL,CAEEE,MAAOF,EAAKE,MAAQyB,EACpBnH,MAAOwF,EAAKxF,MAASwF,EAAKxF,MAAQwF,EAAKE,MAASyB,MAKtD,IAAMxG,EAAO+C,EAAMgE,KAAK,SAAA5C,GAAA,OAAAA,EAAEhB,KAAe3B,IAEnC0F,EAAU,CACd/D,GAAInD,EAAKmD,GACTjD,MAAOF,EAAKE,MACZ6E,MAAO,EACP1F,MAAOW,EAAKI,OAGd,SAAA+G,OAAA9F,OAAA+F,EAAA,EAAA/F,CAAWmD,GAAX,CAAsB0C,KA0BTG,EAvBY,SAACrB,EAADsB,GAA4B,IAAnB7F,EAAmB6F,EAAnB7F,KAAMC,EAAa4F,EAAb5F,QACxC,QAAc4E,IAAVN,EACF,MAAO,CACLxB,UAAW,GACXpF,WAAY,EACZqF,WAAY,GAIhB,OAAQhD,GACN,IAAK,mBACH,OAAO8E,EAAgBP,EAAOtE,EAAS,GACzC,IAAK,wBACH,OAAO6E,EAAgBP,EAAOtE,GAAU,GAC1C,IAAK,wBACH,IAAMmD,EAAOmB,EAAM1B,aAAaE,UAAUuC,KAAK,SAAAQ,GAAA,OAAAA,EAAEpE,KAAezB,IAChE,OAAO6E,EAAgBP,EAAOtE,GAAUmD,EAAKE,OAE/C,QACE,OAAOiB,EAAM1B,eCtDJkD,EAPC,SAACxB,EAAOyB,GACtB,MAAO,CACLvD,SAAUmC,EAAeL,EAAOyB,GAChCnD,aAAc+C,EAAmBrB,EAAOyB,KCD7BC,EAFDC,YAAYH,GCSpBpG,EAAmB,qDCXvBW,KAAO,CACL,CACEoB,GAAI,EACJjD,MAAO,iCACPC,OAAQ,kBACRC,MAAO,GACPC,SAAU,4FAEZ,CACE8C,GAAI,EACJjD,MAAO,cACPC,OAAQ,oBACRC,MAAO,GACPC,SAAU,kGAIdwB,SAAW,WACT,OAAO,IAAI+F,QAAQ,SAACC,EAASC,GAC3BC,WAAW,WACTF,EAAQvE,EAAKvB,MACb+F,EAAO,IAAIE,MAAM,4BAChB,SDTTC,IAASC,OACP5I,EAAAC,EAAAC,cAAC2I,EAAA,EAAD,CAAUT,MAAOA,GACfpI,EAAAC,EAAAC,cAAC4I,EAAD,KACE9I,EAAAC,EAAAC,cAACqB,EAAD,CAA0BwH,MAAOjH,GAC/B9B,EAAAC,EAAAC,cAACC,EAAA,EAAD,KACEH,EAAAC,EAAAC,cAAC8I,EAAD,UAKRC,SAASC,eAAe","file":"static/js/main.c2b81348.chunk.js","sourcesContent":["import Header from './Header'\r\n\r\nexport default Header","import React from 'react'\r\n\r\nimport './Header.scss'\r\n\r\nimport { Link } from 'react-router-dom'\r\n\r\nimport { faShoppingCart } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nconst Header = ({ itemsCount, total}) => {\r\n  return (\r\n    <header>\r\n      <Link to=\"/\">ReStore</Link>\r\n      <Link to=\"/cart\"><span className=\"cart-icon\"><FontAwesomeIcon icon={faShoppingCart} /></span>{itemsCount} items (<span>${total}</span>)</Link>\r\n    </header>\r\n  )\r\n}\r\n\r\nexport default Header\r\n","import BookListItem from './BookListItem'\r\n\r\nexport default BookListItem","import React from 'react'\r\n\r\nimport './BookListItem.scss'\r\n\r\nconst BookListItem = ({ book, onAddToCart }) => {\r\n  const { title, author, price, coverImg } = book;\r\n  return (\r\n    <li className=\"book-list-item\">\r\n      <div className=\"img\">\r\n        <img src={coverImg} alt={title}/>\r\n      </div>\r\n      <div className=\"info\">\r\n        <span className=\"title\">{title}</span>\r\n        <p className=\"author\">{author}</p>\r\n        <p className=\"price\">${price}</p>\r\n        <button className=\"add-to-cart\" onClick={onAddToCart}>Add to cart</button>\r\n      </div>\r\n    </li>\r\n  )\r\n}\r\n\r\nexport default BookListItem\r\n","import LoadSpinner from './LoadSpinner'\r\n\r\nexport default LoadSpinner","import React from 'react'\r\n\r\nimport './LoadSpinner.scss'\r\n\r\nconst LoadSpinner = () => {\r\n  return (\r\n    <div className=\"lds-css ng-scope\">\r\n      <div className=\"lds-rolling\">\r\n        <div></div>\r\n      </div>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default LoadSpinner\r\n","import ErrorIndicator from './ErrorIndicator'\r\n\r\nexport default ErrorIndicator","import React from 'react'\r\n\r\nimport './ErrorIndicator.scss'\r\n\r\nconst ErrorIndicator = () => {\r\n  return (\r\n    <div className=\"error-indicator\">\r\n      <p className=\"boom\">BOOM!</p>\r\n      <p>something has gone terribly wrong</p>\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default ErrorIndicator\r\n","import React from 'react'\r\n\r\nconst {\r\n  Provider: BookstoreServiceProvider,\r\n  Consumer: BookstoreServiceConsumer\r\n} = React.createContext();\r\n\r\nexport {\r\n  BookstoreServiceProvider,\r\n  BookstoreServiceConsumer\r\n}","import React from 'react'\r\n\r\nimport {BookstoreServiceConsumer} from '../BookstoreContextService'\r\n\r\nconst withBookService = () => Wrapped => {\r\n  return (props) => {\r\n    return (\r\n      <BookstoreServiceConsumer>\r\n        {\r\n          (bookstoreService) => {\r\n            return <Wrapped {...props} bookstoreService={bookstoreService} />\r\n          }\r\n        }\r\n      </BookstoreServiceConsumer>\r\n    )\r\n  }\r\n}\r\n\r\nexport default withBookService","const booksLoaded = (newBooks) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_SUCCESS',\r\n    payload: newBooks\r\n  }\r\n}\r\n\r\nconst booksRequested = () => {\r\n  return {\r\n    type: 'FETCH_BOOKS_REQUEST'\r\n  }\r\n}\r\n\r\nconst booksError = (error) => {\r\n  return {\r\n    type: 'FETCH_BOOKS_FAILURE',\r\n    payload: error\r\n  }\r\n}\r\n\r\nconst bookAddToCart = (bookID) => {\r\n  return {\r\n    type: 'BOOK_ADD_TO_CART',\r\n    payload: bookID\r\n  }\r\n}\r\n\r\nconst bookRemoveFromCart = (bookID) => {\r\n  return {\r\n    type: 'BOOK_REMOVE_FROM_CART',\r\n    payload: bookID\r\n  }\r\n}\r\n\r\nconst bookDeleteFromCart = (bookID) => {\r\n  return {\r\n    type: 'BOOK_DELETE_FROM_CART',\r\n    payload: bookID\r\n  }\r\n}\r\n\r\nconst fetchBooks = (bookstoreService, dispatch) => () => {\r\n  dispatch(booksRequested());\r\n  bookstoreService.getBooks()\r\n   .then(data => dispatch(booksLoaded(data)))\r\n   .catch(error => dispatch(booksError(error)));\r\n}\r\n\r\nexport {\r\n  fetchBooks,\r\n  bookAddToCart,\r\n  bookRemoveFromCart,\r\n  bookDeleteFromCart\r\n}","const compose = (...func) => comp => {\r\n  return func.reduceRight((wrapped, fn) => fn(wrapped), comp);\r\n}\r\n\r\nexport default compose","import React, { Component } from 'react'\r\n\r\nimport './BookList.scss'\r\n\r\nimport BookListItem from '../BookListItem'\r\nimport LoadSpinner from '../LoadSpinner'\r\nimport ErrorIndicator from '../ErrorIndicator'\r\nimport {connect} from 'react-redux'\r\nimport {withBookstoreService} from '../hoc'\r\nimport {fetchBooks, bookAddToCart} from '../../actions'\r\nimport {compose} from '../../utils'\r\n\r\nconst BookList = ({books, onAddToCart}) => {\r\n\r\n  return (\r\n    <ul className=\"book-list\">\r\n      {\r\n        books.map(book => {\r\n          return <BookListItem\r\n                    key={book.id}\r\n                    book={book}\r\n                    onAddToCart={() => onAddToCart(book.id)}\r\n                  />\r\n        })\r\n      }\r\n    </ul>\r\n  )\r\n}\r\n\r\nclass BookListContainer extends Component {\r\n\r\n  componentDidMount = () => {\r\n    this.props.fetchBooks();\r\n  }\r\n\r\n  render() {\r\n    const { books, loading, error, onAddToCart } = this.props;\r\n\r\n    if (loading) return <LoadSpinner />\r\n    if (error) return <ErrorIndicator />\r\n\r\n    return <BookList books={books} onAddToCart={onAddToCart} />\r\n  }\r\n}\r\n\r\nconst mapStateToProps = ({bookList: {books, loading, error}}) => {\r\n  return { books, loading, error };\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch, {bookstoreService}) => {\r\n  return {\r\n    fetchBooks: fetchBooks(bookstoreService, dispatch),\r\n    onAddToCart: (id) => dispatch(bookAddToCart(id))\r\n  }\r\n}\r\n\r\nexport default compose(\r\n  withBookstoreService(),\r\n  connect(mapStateToProps, mapDispatchToProps)\r\n)(BookListContainer)\r\n\r\n","import BookList from './BookList'\r\n\r\nexport default BookList","import ShoppingCartTable from './ShoppingCartTable'\r\n\r\nexport default ShoppingCartTable","import React from 'react'\r\n\r\nimport './ShoppingCartTable.scss'\r\n\r\nimport { connect } from 'react-redux'\r\nimport {bookAddToCart, bookRemoveFromCart, bookDeleteFromCart} from '../../actions'\r\nimport { faMinusCircle, faPlusCircle, faTrashAlt } from '@fortawesome/free-solid-svg-icons'\r\nimport { FontAwesomeIcon } from '@fortawesome/react-fontawesome'\r\n\r\nconst ShoppingCartTable = ({items, total, onIncrease, onDecrease, onDelete}) => {\r\n\r\n  const renderRow = (item, i) => {\r\n    const { id, title, count, total} = item;\r\n    return (\r\n      <tr key={id}>\r\n        <td>{i + 1}</td>\r\n        <td>{title}</td>\r\n        <td>{count}</td>\r\n        <td>${total}</td>\r\n        <td className=\"actions\">\r\n          <button className=\"decrease\" onClick={() => onDecrease(id)}><FontAwesomeIcon icon={faMinusCircle} /></button>\r\n          <button className=\"increase\" onClick={() => onIncrease(id)}><FontAwesomeIcon icon={faPlusCircle} /></button>\r\n          <button className=\"delete\" onClick={() => onDelete(id)}><FontAwesomeIcon icon={faTrashAlt} /></button>\r\n        </td>\r\n      </tr>\r\n    )\r\n  }\r\n  \r\n  return (\r\n    <div className=\"shopping-cart-table\">\r\n      <h2>Your Order</h2>\r\n      <table>\r\n        <thead>\r\n          <tr>\r\n            <th>#</th>\r\n            <th>Item</th>\r\n            <th>Count</th>\r\n            <th>Total</th>\r\n            <th>Action</th>\r\n          </tr>\r\n        </thead>\r\n        <tbody>\r\n          {\r\n            items.map(renderRow)\r\n          }\r\n        </tbody>\r\n      </table>\r\n      <p className=\"total\">Total: <span>${total}</span></p>\r\n    </div>\r\n  )\r\n}\r\n\r\nconst mapStateToProps = ({shoppingCart: {cartItems, orderTotal}}) => {\r\n  return {\r\n    items: cartItems,\r\n    total: orderTotal\r\n  }\r\n}\r\n\r\nconst mapDispatchToProps = (dispatch) => {\r\n  return {\r\n     onIncrease: (id) => dispatch(bookAddToCart(id)),\r\n     onDecrease: (id) => dispatch(bookRemoveFromCart(id)),\r\n     onDelete: (id) => dispatch(bookDeleteFromCart(id))\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps, mapDispatchToProps)(ShoppingCartTable)\r\n","import React from 'react'\r\n\r\nimport BookList from '../BookList'\r\nimport ShoppingCartTable from '../ShoppingCartTable'\r\n\r\nconst HomePage = () => {\r\n  return (\r\n    <div>\r\n      <BookList />\r\n      <ShoppingCartTable />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default HomePage\r\n","import React from 'react'\r\nimport ShoppingCartTable from '../ShoppingCartTable';\r\n\r\nconst CartPage = () => {\r\n  return (\r\n    <div>\r\n        <ShoppingCartTable />\r\n    </div>\r\n  )\r\n}\r\n\r\nexport default CartPage\r\n","import App from './App'\r\n\r\nexport default App","import React from 'react'\r\n\r\nimport '../../fonts/roboto.css'\r\nimport '../../scss/screen.scss'\r\nimport './App.scss'\r\n\r\nimport {BrowserRouter as Router, Route, Switch} from 'react-router-dom'\r\nimport {connect} from 'react-redux'\r\n\r\nimport Header from '../Header'\r\nimport {HomePage, CartPage} from '../pages'\r\n\r\n\r\nconst App = ({total, itemsCount}) => {\r\n  return (\r\n    <div id=\"app\">\r\n      <Header itemsCount={itemsCount} total={total} />\r\n      <Router basename={process.env.PUBLIC_URL + '/'}>\r\n        <Switch>\r\n          <Route path=\"/\" exact component={HomePage}/>\r\n          <Route path=\"/cart\" exact component={CartPage}/>\r\n        </Switch>\r\n      </Router>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst mapStateToProps = ({shoppingCart: {orderTotal, itemsCount}}) => {\r\n  return {\r\n    total: orderTotal,\r\n    itemsCount: itemsCount\r\n  }\r\n}\r\n\r\nexport default connect(mapStateToProps)(App)","import ErrorBoundry from './ErrorBoundry'\r\n\r\nexport default ErrorBoundry","import React, { Component } from 'react'\r\n\r\nimport ErrorIndicator from '../ErrorIndicator'\r\n\r\nexport default class ErrorBoundry extends Component {\r\n\r\n  state = {\r\n    hasError: false\r\n  }\r\n\r\n  componentDidCatch = () => {\r\n    this.setState({\r\n      hasError: true\r\n    });\r\n  }\r\n\r\n  render() {\r\n    if (this.state.hasError) {\r\n      return <ErrorIndicator />;\r\n    }\r\n\r\n    return this.props.children;\r\n  }\r\n}\r\n","const updateBookList = (state, {type, payload}) => {\r\n  if (state === undefined) {\r\n    return {\r\n      books: [],\r\n      loading: true,\r\n      error: null\r\n    }\r\n  }\r\n\r\n  switch (type) {\r\n    case 'FETCH_BOOKS_REQUEST':\r\n      return {\r\n        books: [],\r\n        loading: true,\r\n        error: null\r\n      }\r\n    case 'FETCH_BOOKS_SUCCESS':\r\n      return {\r\n        books: payload,\r\n        loading: false, \r\n        error: null\r\n      }\r\n    case 'FETCH_BOOKS_FAILURE':\r\n      return {\r\n        books: [],\r\n        loading: false,\r\n        error: payload\r\n      }\r\n    \r\n    default:\r\n      return state.bookList\r\n  }\r\n}\r\n\r\nexport default updateBookList","const updateCartOrder = (state, bookID, quantity) => {\r\n  const updatedCart = updateCartItems(state, bookID, quantity);\r\n  const updatedTotal = updatedCart.reduce((total, item) => total + item.total, 0);\r\n  const updatedCount = updatedCart.reduce((total, item) => total + item.count, 0);\r\n  return {\r\n    cartItems: updatedCart,\r\n    itemsCount: updatedCount,\r\n    orderTotal: updatedTotal\r\n  }\r\n}\r\n \r\nconst updateCartItems = (state, bookID, quantity) => {\r\n  const { shoppingCart: {cartItems}, bookList: {books} } = state;\r\n\r\n  // Если такая книга уже есть в корзине\r\n  const sameBook = cartItems.find(({id}) => id === bookID);\r\n  if (sameBook) {\r\n    // Если количество становится отрицательным, то удаляем эту книгу из списка\r\n    if (sameBook.count + quantity <= 0) {\r\n      return cartItems.filter(({id}) => id !== bookID)\r\n    }\r\n\r\n    return cartItems.map(item => {\r\n      if (sameBook.id !== item.id) return item;\r\n       \r\n      return {\r\n        ...item,\r\n        count: item.count + quantity,\r\n        total: item.total + (item.total / item.count) * quantity\r\n      }\r\n    });\r\n  }\r\n  // Если такой книги нет, добавляем новую\r\n  const book = books.find(({id}) => id === bookID);\r\n\r\n  const newBook = {\r\n    id: book.id,\r\n    title: book.title,\r\n    count: 1,\r\n    total: book.price\r\n  }\r\n\r\n  return [...cartItems, newBook];\r\n}\r\n\r\nconst updateShoppingCart = (state, {type, payload}) => {\r\n  if (state === undefined) {\r\n    return {\r\n      cartItems: [],\r\n      itemsCount: 0,\r\n      orderTotal: 0,\r\n    }\r\n  }\r\n\r\n  switch (type) {\r\n    case 'BOOK_ADD_TO_CART':\r\n      return updateCartOrder(state, payload, 1);\r\n    case 'BOOK_REMOVE_FROM_CART':\r\n      return updateCartOrder(state, payload, -1);\r\n    case 'BOOK_DELETE_FROM_CART':\r\n      const item = state.shoppingCart.cartItems.find(({id}) => id === payload);\r\n      return updateCartOrder(state, payload, -item.count);\r\n    \r\n    default:\r\n      return state.shoppingCart\r\n  }\r\n}\r\n\r\nexport default updateShoppingCart","import updateBookList from './bookList'\r\nimport updateShoppingCart from './shoppingCart'\r\n\r\nconst reducer = (state, action) => {\r\n  return {\r\n    bookList: updateBookList(state, action),\r\n    shoppingCart: updateShoppingCart(state, action)\r\n  }\r\n}\r\n\r\nexport default reducer","import { createStore } from 'redux'\r\nimport reducer from './reducers'\r\n\r\nconst store = createStore(reducer);\r\n\r\nexport default store","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\nimport {Provider} from 'react-redux'\r\nimport {BrowserRouter as Router} from 'react-router-dom'\r\n\r\nimport App from './components/App'\r\nimport ErrorBoundry from './components/ErrorBoundry'\r\nimport BookstoreService from './services/BookstoreService'\r\nimport {BookstoreServiceProvider} from './components/BookstoreContextService'\r\n\r\nimport store from './store'\r\n\r\nconst bookstoreService = new BookstoreService();\r\n\r\nReactDOM.render(\r\n  <Provider store={store}>\r\n    <ErrorBoundry>\r\n      <BookstoreServiceProvider value={bookstoreService}>\r\n        <Router>\r\n          <App />\r\n        </Router>\r\n      </BookstoreServiceProvider>\r\n    </ErrorBoundry>\r\n  </Provider>,\r\n  document.getElementById('root')\r\n);","export default class BookstoreService {\r\n  data = [\r\n    {\r\n      id: 1,\r\n      title: 'Production-Ready Microservices',\r\n      author: 'Susan J. Fowler',\r\n      price: 32,\r\n      coverImg: 'https://images-na.ssl-images-amazon.com/images/I/41yJ75gpV-L._SX381_BO1,204,203,200_.jpg'\r\n    },\r\n    {\r\n      id: 2,\r\n      title: 'Realise It!',\r\n      author: 'Michael T. Nygard',\r\n      price: 45,\r\n      coverImg: 'https://images-na.ssl-images-amazon.com/images/I/414CRjLjwgL._SX403_BO1,204,203,200_.jpg'\r\n    }\r\n  ];\r\n\r\n  getBooks = () => {\r\n    return new Promise((resolve, reject) => {\r\n      setTimeout(() => {\r\n        resolve(this.data);\r\n        reject(new Error('Something bad happened'));\r\n      }, 700);\r\n    });\r\n  }\r\n}"],"sourceRoot":""}